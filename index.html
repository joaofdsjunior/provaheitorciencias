<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Ci√™ncias - Estilo Roblox</title>
    <style>
        /* --- GERAL E TEMA ROBLOX --- */
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap');

        :root {
            --roblox-blue: #00A2FF;
            --roblox-dark-blue: #0084cc;
            --roblox-grey: #A3A3A3;
            --roblox-light-grey: #E3E3E3;
            --roblox-dark-grey: #545454;
            --success-color: #00B06F;
            --danger-color: #FF4F4F;
            --background-color: #F2F2F2;
            
            --btn-c1: #7BBDFF; /* Azul */
            --btn-c2: #B57BFF; /* Roxo */
            --btn-c3: #FFB37B; /* Laranja */
            --btn-c4: #7BFFD9; /* Turquesa */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Fredoka One', cursive; background-color: var(--background-color); color: var(--roblox-dark-grey); display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 10px; }
        .container { background-color: white; padding: 20px; border-radius: 20px; width: 100%; max-width: 800px; box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); border: 5px solid var(--roblox-light-grey); text-align: center; overflow: hidden; }
        .fade-out { opacity: 0; transform: translateY(-20px); transition: opacity 0.3s ease-out, transform 0.3s ease-out; }
        .fade-in { opacity: 1; transform: translateY(0); transition: opacity 0.4s ease-in, transform 0.4s ease-in; }
        h1, h2 { margin-bottom: 20px; color: var(--roblox-dark-grey); letter-spacing: 1px; }
        h1 { font-size: 2.5rem; color: var(--roblox-blue); }
        h2 { font-size: 1.4rem; font-weight: 400; min-height: 80px; display: flex; align-items: center; justify-content: center; }
        p { font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1rem; margin-bottom: 25px; }
        button { font-family: 'Fredoka One', cursive; font-size: 1.1rem; padding: 15px 20px; border-radius: 12px; border: none; cursor: pointer; transition: all 0.1s ease-in-out; margin: 5px; text-transform: uppercase; letter-spacing: 1px; }
        button:active { transform: translateY(4px); }
        .btn-primary { background-color: var(--roblox-blue); color: white; border-bottom: 6px solid var(--roblox-dark-blue); }
        .btn-primary:active { box-shadow: 0 2px 0 var(--roblox-dark-blue); }
        .btn-primary:hover { background-color: #00aeff; }
        input { font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1.1rem; padding: 15px; border-radius: 12px; border: 3px solid var(--roblox-light-grey); margin-bottom: 15px; width: 100%; }
        
        /* Telas */
        #start-screen, #quiz-screen, #results-screen, #explanation-screen { display: none; }
        #start-screen { display: block; }
        
        #quiz-screen #question-container { background: var(--roblox-light-grey); padding: 20px; margin-bottom: 25px; border-radius: 15px; }
        #quiz-screen #answers-container { display: grid; grid-template-columns: 1fr; gap: 10px; }
        #answers-container button { width: 100%; min-height: 60px; color: var(--roblox-dark-grey); border: none; border-bottom-width: 6px; border-bottom-style: solid; text-transform: none; font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 0.9rem; padding: 10px; }
        #answers-container button:hover { filter: brightness(1.05); }
        #answers-container button:active { border-bottom-width: 2px; }
        .btn-color-1 { background-color: var(--btn-c1); border-color: #689fd9; }
        .btn-color-2 { background-color: var(--btn-c2); border-color: #9c68d9; }
        .btn-color-3 { background-color: var(--btn-c3); border-color: #d99668; }
        .btn-color-4 { background-color: var(--btn-c4); border-color: #68d9b8; }
        #quiz-screen #hud { display: grid; grid-template-columns: 1fr; gap: 10px; text-align: center; font-size: 1.2rem; margin-top: 20px; color: var(--roblox-dark-grey); background-color: var(--roblox-light-grey); padding: 10px; border-radius: 15px; }
        .correct { background-color: var(--success-color) !important; color: white !important; border-color: #008a58 !important; }
        .incorrect { background-color: var(--danger-color) !important; color: white !important; border-color: #cc3f3f !important; opacity: 0.8; }
        
        #explanation-screen { min-height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #explanation-header { font-size: 2rem; margin-bottom: 15px; }
        #explanation-text { font-family: 'Poppins', sans-serif; font-size: 1.1rem; font-weight: 600; max-width: 90%; margin-bottom: 25px; }
        #final-score { font-size: 3rem !important; }

        #award-container { margin: 20px 0; }
        #award-icon { font-size: 5rem; }
        #award-text { font-size: 1.8rem; margin-top: 10px; }
        #share-notification { color: var(--success-color); font-family: 'Poppins', sans-serif; font-weight: 600; height: 20px; }

        /* --- NOVOS ESTILOS PARA CONTROLE DE VOZ --- */
        #voice-control { margin-top: 20px; }
        #voice-btn { background-color: var(--roblox-grey); color: white; border-bottom-color: var(--roblox-dark-grey); width: 80px; height: 80px; border-radius: 50%; font-size: 2.5rem; padding: 0; }
        #voice-btn.listening { animation: pulse 1.5s infinite; }
        #voice-status { font-family: 'Poppins', sans-serif; font-weight: 600; height: 20px; margin-top: 10px; }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.4); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(0, 0, 0, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 0, 0, 0); }
        }

        /* --- OTIMIZA√á√ÉO PARA DESKTOP (TELAS MAIORES) --- */
        @media (min-width: 768px) {
            .container { padding: 40px; }
            h1 { font-size: 3rem; }
            h2 { font-size: 1.6rem; min-height: 100px; }
            p { font-size: 1.1rem; }
            input { width: 90%; }
            #quiz-screen #answers-container { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
            #answers-container button { min-height: 70px; font-size: 1rem; }
            #quiz-screen #hud { grid-template-columns: 1fr 1fr 1fr; font-size: 1.4rem; margin-top: 30px; }
            #explanation-screen { min-height: 400px; }
            #explanation-header { font-size: 2.5rem; }
            #explanation-text { font-size: 1.2rem; }
            #final-score { font-size: 4rem !important; }
        }

    </style>
</head>
<body>

    <div class="container">
        <!-- TELA INICIAL -->
        <div id="start-screen">
            <h1>Quiz de Ci√™ncias</h1>
            <p>Teste seus conhecimentos! Cada pergunta vale 10 pontos.</p>
            <input type="text" id="player-name" placeholder="Digite seu nome">
            <br>
            <button onclick="startGame()" class="btn-primary">Jogar</button>
        </div>

        <!-- TELA DO QUIZ -->
        <div id="quiz-screen">
            <div id="question-container"><h2 id="question-text"></h2></div>
            <div id="answers-container"></div>
            <div id="voice-control">
                <button id="voice-btn">üé§</button>
                <p id="voice-status"></p>
            </div>
            <div id="hud">
                <div id="progress">Pergunta 1 / 40</div>
                <div id="score">Pontos: 0</div>
                <div id="correct-answers">Acertos: 0</div>
            </div>
        </div>
        
        <!-- TELA DE EXPLICA√á√ÉO -->
        <div id="explanation-screen">
            <h2 id="explanation-header"></h2>
            <p id="explanation-text"></p>
            <button onclick="showNextQuestion()" class="btn-primary">Pr√≥xima Pergunta</button>
        </div>

        <!-- TELA DE RESULTADOS -->
        <div id="results-screen">
            <h1>Fim de Jogo!</h1>
            <h2 id="final-player-name"></h2>
            <div id="award-container">
                <div id="award-icon"></div>
                <p id="award-text"></p>
            </div>
            <p id="final-correct-answers" style="font-size: 1.5rem;"></p>
            <p>Sua pontua√ß√£o final foi:</p>
            <p id="final-score" style="font-size: 4rem; color: var(--roblox-blue);"></p>
            <button onclick="shareResult()" class="btn-primary">Desafiar Amigos!</button>
            <button onclick="restartGame()" class="btn-primary">Jogar de Novo</button>
            <div id="share-notification"></div>
        </div>
    </div>

    <script>
        // --- BANCO DE PERGUNTAS E MENSAGENS---
        const allQuestions = [
            { question: "Um atleta de maratona, durante uma corrida, aumenta intensamente sua frequ√™ncia respirat√≥ria e card√≠aca. Qual a principal raz√£o fisiol√≥gica para essa resposta do corpo ao exerc√≠cio?", answers: [{ text: "Para aumentar a produ√ß√£o de suor e resfriar o corpo mais rapidamente.", correct: false }, { text: "Para fornecer mais oxig√™nio e nutrientes aos m√∫sculos, que est√£o consumindo mais energia.", correct: true }, { text: "Para diminuir a press√£o arterial, que sobe perigosamente durante o esfor√ßo f√≠sico.", correct: false }, { text: "Para eliminar o excesso de √°gua do sangue atrav√©s da respira√ß√£o e da transpira√ß√£o.", correct: false }], explanation: "Durante o exerc√≠cio, os m√∫sculos precisam de mais energia (ATP), cuja produ√ß√£o depende de oxig√™nio. O corpo acelera a respira√ß√£o para captar mais O2 e os batimentos card√≠acos para transport√°-lo mais r√°pido at√© os m√∫sculos." },
            { question: "Ap√≥s uma refei√ß√£o rica em prote√≠nas, o metabolismo celular produz uma grande quantidade de ureia, que √© t√≥xica. Qual √© o trajeto correto que a ureia faz desde sua produ√ß√£o at√© ser eliminada do corpo?", answers: [{ text: "√â produzida nos rins, vai para o f√≠gado para ser processada e √© eliminada nas fezes.", correct: false }, { text: "√â produzida no f√≠gado a partir da am√¥nia, cai no sangue, √© filtrada pelos rins e eliminada na urina.", correct: true }, { text: "√â produzida nos m√∫sculos, transportada pelo sangue e eliminada diretamente pela pele atrav√©s do suor.", correct: false }, { text: "√â produzida no p√¢ncreas, segue para o intestino e √© eliminada junto com os restos de alimentos.", correct: false }], explanation: "O f√≠gado converte a am√¥nia (altamente t√≥xica) em ureia (menos t√≥xica). A ureia √© ent√£o liberada no sangue, e os rins s√£o os √≥rg√£os respons√°veis por filtrar o sangue e remover essa ureia, eliminando-a na urina." },
            { question: "Um paciente chega ao hospital e precisa de uma transfus√£o de sangue de emerg√™ncia. O sangue dele √© do tipo A+. Considerando os ant√≠genos e anticorpos, qual tipo sangu√≠neo ele N√ÉO PODE receber de forma alguma?", answers: [{ text: "O+, pois ambos s√£o Rh positivo e o corpo n√£o reagiria.", correct: false }, { text: "A-, pois n√£o possui o ant√≠geno Rh e √© compat√≠vel com o sistema ABO.", correct: false }, { text: "B+, pois o plasma do paciente A+ cont√©m anticorpos Anti-B que atacariam as hem√°cias do doador.", correct: true }, { text: "O-, pois, por ser doador universal, √© seguro para qualquer tipo sangu√≠neo.", correct: false }], explanation: "Uma pessoa do tipo A+ possui ant√≠genos A e Rh em suas hem√°cias e anticorpos Anti-B no plasma. Se receber sangue B+, seus anticorpos Anti-B atacar√£o as hem√°cias do doador, causando uma rea√ß√£o perigosa de aglutina√ß√£o." },
            { question: "Para que o ar entre nos pulm√µes, √© necess√°rio que o volume da caixa tor√°cica aumente. Qual movimento coordenado dos m√∫sculos respirat√≥rios permite que a inspira√ß√£o ocorra?", answers: [{ text: "O diafragma relaxa e sobe, enquanto os m√∫sculos intercostais se contraem para expandir o t√≥rax.", correct: false }, { text: "O diafragma contrai e desce, e os m√∫sculos intercostais levantam as costelas, aumentando o espa√ßo.", correct: true }, { text: "Apenas o diafragma contrai e desce, sendo o √∫nico m√∫sculo ativo na inspira√ß√£o tranquila.", correct: false }, { text: "O diafragma e os m√∫sculos intercostais relaxam simultaneamente, permitindo a entrada passiva do ar.", correct: false }], explanation: "A inspira√ß√£o √© um processo ativo. A contra√ß√£o do diafragma (que o move para baixo) e a contra√ß√£o dos m√∫sculos intercostais (que elevam as costelas) aumentam o volume da caixa tor√°cica, diminuindo a press√£o interna e for√ßando a entrada do ar." },
            { question: "Durante o processo de forma√ß√£o da urina no n√©fron, diversas subst√¢ncias s√£o filtradas do sangue, mas algumas que s√£o √∫teis ao corpo precisam ser devolvidas √† circula√ß√£o. Como se chama esse processo de 'devolu√ß√£o' e qual subst√¢ncia √© um exemplo disso?", answers: [{ text: "Chama-se secre√ß√£o, e um exemplo √© a ureia, que √© devolvida ao sangue.", correct: false }, { text: "Chama-se filtra√ß√£o, e um exemplo s√£o as prote√≠nas, que s√£o devolvidas.", correct: false }, { text: "Chama-se reabsor√ß√£o, e um exemplo √© a glicose, que √© totalmente reabsorvida em uma pessoa saud√°vel.", correct: true }, { text: "Chama-se excre√ß√£o, e um exemplo √© a √°gua, que √© totalmente devolvida ao sangue.", correct: false }], explanation: "Ap√≥s a filtra√ß√£o inicial, o processo de reabsor√ß√£o tubular recupera subst√¢ncias essenciais. Em um indiv√≠duo saud√°vel, 100% da glicose filtrada √© reabsorvida de volta para o sangue, pois √© uma fonte de energia valiosa." },
            { question: "Um indiv√≠duo com anemia ferropriva sente muito cansa√ßo e falta de ar ao fazer esfor√ßos. Qual a conex√£o direta entre a falta de ferro e esses sintomas?", answers: [{ text: "O ferro √© essencial para a coagula√ß√£o, e sua falta causa pequenos sangramentos internos.", correct: false }, { text: "A falta de ferro afeta os leuc√≥citos, diminuindo a imunidade e causando fraqueza.", correct: false }, { text: "O ferro √© um componente central da hemoglobina, que transporta oxig√™nio. Sem ferro, h√° menos transporte de O2 para as c√©lulas produzirem energia.", correct: true }, { text: "O ferro √© necess√°rio para a contra√ß√£o do diafragma, e sua falta dificulta a respira√ß√£o.", correct: false }], explanation: "A hemoglobina, prote√≠na que transporta oxig√™nio dentro das hem√°cias, depende do ferro para ser formada. A falta de ferro (anemia ferropriva) leva a uma menor capacidade de transporte de oxig√™nio pelo sangue, resultando em cansa√ßo por falta de energia nas c√©lulas." },
            { question: "Se uma pessoa prende a respira√ß√£o por muito tempo, o que acontece com a concentra√ß√£o de gases no sangue e qual a consequ√™ncia imediata disso no c√©rebro?", answers: [{ text: "A concentra√ß√£o de O2 aumenta e a de CO2 diminui, causando euforia.", correct: false }, { text: "A concentra√ß√£o de CO2 aumenta, o que torna o sangue mais √°cido e estimula o centro respirat√≥rio no c√©rebro a for√ßar a respira√ß√£o.", correct: true }, { text: "A concentra√ß√£o de O2 e CO2 se estabiliza, permitindo prender a respira√ß√£o por v√°rios minutos sem consequ√™ncias.", correct: false }, { text: "A concentra√ß√£o de CO2 diminui, o que relaxa o c√©rebro e causa sonol√™ncia.", correct: false }], explanation: "Ao prender a respira√ß√£o, o CO2 produzido pelas c√©lulas se acumula no sangue. Esse aumento de CO2 √© o principal est√≠mulo para o centro respirat√≥rio no bulbo (parte do c√©rebro), que dispara um comando involunt√°rio para os m√∫sculos respirat√≥rios contra√≠rem, for√ßando a respira√ß√£o." },
            { question: "O cora√ß√£o humano possui quatro c√¢maras que trabalham em sincronia. Qual √© a sequ√™ncia correta do fluxo de sangue venoso (pobre em O2) ao entrar no cora√ß√£o?", answers: [{ text: "Entra no √°trio esquerdo, passa para o ventr√≠culo esquerdo e √© bombeado para os pulm√µes.", correct: false }, { text: "Entra no √°trio direito, passa para o ventr√≠culo direito e √© bombeado para os pulm√µes.", correct: true }, { text: "Entra no ventr√≠culo direito, passa para o √°trio direito e √© bombeado para o corpo.", correct: false }, { text: "Entra no √°trio direito, passa para o √°trio esquerdo e depois para os ventr√≠culos.", correct: false }], explanation: "O sangue venoso, vindo do corpo, entra no cora√ß√£o pelo √°trio direito. De l√°, passa pela valva tric√∫spide para o ventr√≠culo direito, que o bombeia para os pulm√µes atrav√©s da art√©ria pulmonar para ser oxigenado." },
            { question: "Um paciente com insufici√™ncia renal cr√¥nica precisa fazer hemodi√°lise. O que a m√°quina de hemodi√°lise faz que o corpo do paciente n√£o consegue mais fazer eficientemente?", answers: [{ text: "Produz horm√¥nios para controlar a press√£o arterial e a produ√ß√£o de hem√°cias.", correct: false }, { text: "Transporta oxig√™nio para as c√©lulas do corpo, substituindo a fun√ß√£o do sangue.", correct: false }, { text: "Filtra o sangue para remover o excesso de √°gua, sais e res√≠duos t√≥xicos como a ureia.", correct: true }, { text: "Bombeia o sangue pelo corpo, substituindo a fun√ß√£o do cora√ß√£o.", correct: false }], explanation: "A hemodi√°lise simula a fun√ß√£o principal dos rins: a filtra√ß√£o do sangue. A m√°quina remove as impurezas e o excesso de l√≠quidos que se acumulam no corpo quando os rins falham." },
            { question: "A aterosclerose, o ac√∫mulo de placas de gordura nas art√©rias, √© um fator de risco para o infarto. Como esse processo pode levar a um ataque card√≠aco?", answers: [{ text: "As placas de gordura se desprendem e viajam at√© os pulm√µes, causando uma embolia pulmonar.", correct: false }, { text: "O ac√∫mulo de gordura aumenta a produ√ß√£o de gl√≥bulos brancos, que atacam o cora√ß√£o.", correct: false }, { text: "A placa de gordura pode romper, formando um co√°gulo que bloqueia uma art√©ria coron√°ria, interrompendo o fluxo de sangue para o m√∫sculo card√≠aco.", correct: true }, { text: "A gordura endurece as veias, dificultando o retorno do sangue para o cora√ß√£o.", correct: false }], explanation: "O infarto ocorre quando o fluxo de sangue para uma parte do cora√ß√£o √© bloqueado. Na aterosclerose, uma placa de gordura em uma art√©ria coron√°ria (que irriga o cora√ß√£o) pode se romper, ativando a coagula√ß√£o e formando um trombo (co√°gulo) que obstrui a passagem de sangue." },
            { question: "Qual o nome da estrutura que impede o alimento de entrar na traqueia?", answers: [{ text: "Faringe", correct: false }, { text: "Diafragma", correct: false }, { text: "Epiglote", correct: true }, { text: "Glote", correct: false }], explanation: "A epiglote √© uma cartilagem que funciona como uma 'porta', fechando a entrada da laringe quando engolimos para que o alimento v√° para o es√¥fago." },
            { question: "A hemofilia √© uma condi√ß√£o que afeta qual processo do sangue?", answers: [{ text: "Transporte de oxig√™nio", correct: false }, { text: "Coagula√ß√£o", correct: true }, { text: "Defesa contra infec√ß√µes", correct: false }, { text: "Produ√ß√£o de anticorpos", correct: false }], explanation: "A hemofilia √© uma doen√ßa gen√©tica que dificulta a coagula√ß√£o do sangue, podendo causar hemorragias graves." },
            { question: "Na press√£o arterial 120/80 mmHg, o que o n√∫mero 120 representa?", answers: [{ text: "Press√£o da di√°stole", correct: false }, { text: "Press√£o dos capilares", correct: false }, { text: "Press√£o da s√≠stole", correct: true }, { text: "Frequ√™ncia card√≠aca", correct: false }], explanation: "O n√∫mero maior (120) representa a press√£o sist√≥lica, a for√ßa m√°xima do sangue nas art√©rias quando o cora√ß√£o se contrai." },
            { question: "Qual o nome da doen√ßa causada pela incompatibilidade do Fator Rh entre m√£e e feto?", answers: [{ text: "Anemia", correct: false }, { text: "Hemofilia", correct: false }, { text: "Trombose", correct: false }, { text: "Eritroblastose Fetal", correct: true }], explanation: "A Eritroblastose Fetal ocorre quando uma m√£e Rh- gera anticorpos contra as hem√°cias de um feto Rh+, o que pode ser perigoso em uma segunda gesta√ß√£o." },
            { question: "Por que a urina de uma pessoa saud√°vel n√£o deve conter glicose?", answers: [{ text: "Porque a glicose √© t√≥xica", correct: false }, { text: "√â totalmente reabsorvida nos rins", correct: true }, { text: "N√£o √© filtrada pelos rins", correct: false }, { text: "Porque a glicose evapora", correct: false }], explanation: "Toda a glicose que √© filtrada nos rins √© reabsorvida de volta para o sangue, pois √© uma fonte de energia importante. Sua presen√ßa na urina pode indicar diabetes." },
            { question: "Qual a fun√ß√£o das v√°lvulas localizadas no cora√ß√£o e nas veias?", answers: [{ text: "Acelerar o fluxo sangu√≠neo", correct: false }, { text: "Impedir o refluxo do sangue", correct: true }, { text: "Filtrar o sangue", correct: false }, { text: "Produzir hem√°cias", correct: false }], explanation: "As v√°lvulas funcionam como port√µes de sentido √∫nico, garantindo que o sangue flua sempre na dire√ß√£o correta e n√£o retorne." },
            { question: "O que √© a morte encef√°lica, condi√ß√£o para a doa√ß√£o de √≥rg√£os?", answers: [{ text: "Cora√ß√£o para de bater", correct: false }, { text: "Perda irrevers√≠vel das fun√ß√µes do c√©rebro", correct: true }, { text: "Um coma profundo", correct: false }, { text: "Pulm√µes param de funcionar", correct: false }], explanation: "A morte encef√°lica √© a parada total e irrevers√≠vel do c√©rebro. √â o crit√©rio legal para a doa√ß√£o de √≥rg√£os, mesmo que o cora√ß√£o ainda bata com ajuda de aparelhos." },
            { question: "Qual estrutura pertence tanto ao sistema respirat√≥rio quanto ao digest√≥rio?", answers: [{ text: "Laringe", correct: false }, { text: "Es√¥fago", correct: false }, { text: "Faringe", correct: true }, { text: "Br√¥nquios", correct: false }], explanation: "A faringe √© um canal comum por onde passam tanto o ar (para a laringe) quanto o alimento (para o es√¥fago)." },
            { question: "Por que pessoas que vivem em grandes altitudes t√™m mais hem√°cias?", answers: [{ text: "Porque o ar √© mais quente", correct: false }, { text: "Para adaptar √† menor quantidade de oxig√™nio", correct: true }, { text: "Porque comem mais ferro", correct: false }, { text: "√â coincid√™ncia gen√©tica", correct: false }], explanation: "Em altitudes elevadas, o ar √© rarefeito (menos oxig√™nio). O corpo se adapta produzindo mais hem√°cias para otimizar a capta√ß√£o do pouco oxig√™nio dispon√≠vel." },
            { question: "O que √© a aterosclerose?", answers: [{ text: "Infec√ß√£o nos pulm√µes", correct: false }, { text: "Arritmia card√≠aca", correct: false }, { text: "Endurecimento das art√©rias por gordura", correct: true }, { text: "Doen√ßa nos rins", correct: false }], explanation: "A aterosclerose √© o ac√∫mulo de placas de gordura nas paredes das art√©rias, o que as endurece e dificulta a passagem do sangue, podendo causar infartos e AVCs." },
            { question: "O que acontece com o diafragma durante a inspira√ß√£o?", answers: [{ text: "Ele relaxa e sobe", correct: false }, { text: "Ele contrai e desce", correct: true }, { text: "Ele n√£o se move", correct: false }, { text: "Ele se move para os lados", correct: false }], explanation: "Na inspira√ß√£o, o diafragma se contrai e desce, aumentando o volume da caixa tor√°cica e permitindo que o ar entre nos pulm√µes." },
            { question: "Qual o nome do l√≠quido amarelado do sangue, composto principalmente por √°gua?", answers: [{ text: "Linfa", correct: false }, { text: "Soro", correct: false }, { text: "Plasma", correct: true }, { text: "Hemoglobina", correct: false }], explanation: "O plasma √© a parte l√≠quida do sangue (cerca de 55% do volume total) e √© respons√°vel por transportar c√©lulas, nutrientes e outras subst√¢ncias." },
            { question: "O que acontece com a produ√ß√£o de urina se uma pessoa bebe muito √°lcool?", answers: [{ text: "Diminui, pois o √°lcool inibe o ADH", correct: false }, { text: "Aumenta, pois o √°lcool inibe o ADH", correct: true }, { text: "N√£o se altera", correct: false }, { text: "A urina fica mais escura", correct: false }], explanation: "O √°lcool inibe o horm√¥nio ADH, fazendo com que os rins reabsorvam menos √°gua. Isso aumenta o volume de urina e pode levar √† desidrata√ß√£o." },
            { question: "Qual o nome do processo de respira√ß√£o que ocorre dentro das c√©lulas?", answers: [{ text: "Hematose", correct: false }, { text: "Ventila√ß√£o Pulmonar", correct: false }, { text: "Respira√ß√£o Celular", correct: true }, { text: "Fagocitose", correct: false }], explanation: "A Respira√ß√£o Celular acontece nas mitoc√¥ndrias, onde a c√©lula usa oxig√™nio para quebrar a glicose e produzir energia (ATP)." },
            { question: "Um exame com baixo n√∫mero de plaquetas indica um risco maior de:", answers: [{ text: "Infec√ß√µes", correct: false }, { text: "Anemia", correct: false }, { text: "Hemorragias", correct: true }, { text: "Alergias", correct: false }], explanation: "As plaquetas s√£o essenciais para a coagula√ß√£o. Um n√∫mero baixo delas significa que o corpo tem dificuldade em estancar sangramentos." },
            { question: "Qual vaso sangu√≠neo geralmente tem a parede mais espessa e el√°stica?", answers: [{ text: "Veia", correct: false }, { text: "Art√©ria", correct: true }, { text: "Capilar", correct: false }, { text: "V√™nula", correct: false }], explanation: "As art√©rias precisam ter paredes grossas e el√°sticas para suportar a alta press√£o do sangue bombeado pelo cora√ß√£o." },
            { question: "Onde ficam os aglutinog√™nios, que definem o tipo sangu√≠neo?", answers: [{ text: "No plasma", correct: false }, { text: "Nos leuc√≥citos", correct: false }, { text: "Nas hem√°cias", correct: true }, { text: "Nas plaquetas", correct: false }], explanation: "Os aglutinog√™nios (ant√≠genos A e B) s√£o prote√≠nas localizadas na superf√≠cie das hem√°cias, funcionando como uma 'identidade' da c√©lula." },
            { question: "O que √© um infarto do mioc√°rdio?", answers: [{ text: "Uma arritmia grave", correct: false }, { text: "Press√£o alta", correct: false }, { text: "Morte de parte do m√∫sculo card√≠aco", correct: true }, { text: "Inflama√ß√£o do cora√ß√£o", correct: false }], explanation: "O infarto ocorre quando uma art√©ria do cora√ß√£o (coron√°ria) √© bloqueada, impedindo a chegada de oxig√™nio e causando a morte de parte do m√∫sculo card√≠aco." },
            { question: "Qual o nome do 'marca-passo natural' do cora√ß√£o?", answers: [{ text: "N√≥ atrioventricular", correct: false }, { text: "Mioc√°rdio", correct: false }, { text: "V√°lvula mitral", correct: false }, { text: "N√≥ sinoatrial", correct: true }], explanation: "O n√≥ sinoatrial √© um conjunto de c√©lulas que gera os impulsos el√©tricos que coordenam os batimentos do cora√ß√£o." },
            { question: "Qual o tratamento para uma pessoa cujos rins pararam de funcionar?", answers: [{ text: "Transfus√£o de sangue", correct: false }, { text: "Hemodi√°lise", correct: true }, { text: "Quimioterapia", correct: false }, { text: "Cateterismo", correct: false }], explanation: "A hemodi√°lise √© um procedimento que filtra o sangue artificialmente, fazendo o trabalho que os rins doentes n√£o conseguem mais fazer." },
            { question: "Por que n√£o se deve beber √°gua do mar?", answers: [{ text: "Cont√©m muitas bact√©rias", correct: false }, { text: "√â muito gelada", correct: false }, { text: "O excesso de sal causa desidrata√ß√£o", correct: true }, { text: "N√£o tem nutrientes", correct: false }], explanation: "A √°gua do mar √© t√£o salgada que, para elimin√°-la, nosso corpo precisa usar mais √°gua do que a que foi ingerida, causando desidrata√ß√£o." },
            { question: "O que s√£o os c√≠lios presentes na traqueia?", answers: [{ text: "Estruturas que produzem som", correct: false }, { text: "Filtram o ar, empurrando o muco", correct: true }, { text: "Realizam a troca gasosa", correct: false }, { text: "S√£o respons√°veis pelo olfato", correct: false }], explanation: "Os c√≠lios da traqueia se movem constantemente para empurrar o muco com impurezas (poeira, bact√©rias) para fora das vias respirat√≥rias." },
            { question: "Qual o nome do procedimento que remove pedras nos rins com ondas de choque?", answers: [{ text: "Endoscopia", correct: false }, { text: "Cateterismo", correct: false }, { text: "Litotripsia", correct: true }, { text: "Bi√≥psia", correct: false }], explanation: "A litotripsia usa ondas de choque de alta energia para quebrar os c√°lculos renais em peda√ßos menores, que podem ser eliminados pela urina." },
            { question: "Uma pessoa do tipo AB+ pode receber sangue de quem?", answers: [{ text: "Apenas de AB+", correct: false }, { text: "Apenas de O-", correct: false }, { text: "De todos os tipos (Receptor Universal)", correct: true }, { text: "Apenas de tipos com Rh+", correct: false }], explanation: "O sangue AB+ √© o receptor universal porque possui os ant√≠genos A, B e Rh, ent√£o n√£o produz anticorpos contra nenhum tipo sangu√≠neo." },
            { question: "O que √© a pleura?", answers: [{ text: "O m√∫sculo da respira√ß√£o", correct: false }, { text: "A membrana que reveste os pulm√µes", correct: true }, { text: "Onde o sangue √© feito", correct: false }, { text: "Um osso da caixa tor√°cica", correct: false }], explanation: "A pleura √© uma membrana dupla que reveste os pulm√µes, permitindo que eles deslizem suavemente dentro da caixa tor√°cica durante a respira√ß√£o." },
            { question: "Qual o principal risco da hipertens√£o (press√£o alta)?", answers: [{ text: "C√°ries", correct: false }, { text: "Diabetes", correct: false }, { text: "AVC e infarto", correct: true }, { text: "Gripe", correct: false }], explanation: "A press√£o alta for√ßa o cora√ß√£o a trabalhar mais e danifica as paredes das art√©rias, aumentando muito o risco de Acidente Vascular Cerebral (AVC) e infarto." },
            { question: "O sangue venoso √© rico em qual g√°s?", answers: [{ text: "Oxig√™nio", correct: false }, { text: "G√°s Carb√¥nico (CO2)", correct: true }, { text: "Nitrog√™nio", correct: false }, { text: "H√©lio", correct: false }], explanation: "O sangue venoso √© aquele que est√° voltando dos tecidos do corpo, trazendo o g√°s carb√¥nico produzido pelas c√©lulas para ser eliminado nos pulm√µes." },
            { question: "Qual o nome da unidade filtradora dos rins?", answers: [{ text: "Alv√©olo", correct: false }, { text: "Neur√¥nio", correct: false }, { text: "N√©fron", correct: true }, { text: "C√°psula", correct: false }], explanation: "Cada rim possui cerca de 1 milh√£o de n√©frons, que s√£o as estruturas microsc√≥picas respons√°veis por filtrar o sangue e formar a urina." },
            { question: "Qual o tempo m√°ximo de doa√ß√£o de sangue para homens por ano?", answers: [{ text: "12 vezes", correct: false }, { text: "2 vezes", correct: false }, { text: "6 vezes", correct: false }, { text: "4 vezes", correct:true }], explanation: "Homens podem doar sangue a cada 2 meses, com um limite de 4 doa√ß√µes por ano, para garantir a recupera√ß√£o completa do corpo." },
            { question: "O que √© leucemia?", answers: [{ text: "Falta de hem√°cias", correct: false }, { text: "C√¢ncer nas c√©lulas de defesa (leuc√≥citos)", correct: true }, { text: "Excesso de plaquetas", correct: false }, { text: "Falta de plasma", correct: false }], explanation: "A leucemia √© um tipo de c√¢ncer que afeta a medula √≥ssea, causando a produ√ß√£o descontrolada de gl√≥bulos brancos (leuc√≥citos) anormais." }
        ];
        const correctFeedbacks = [ "Isso mesmo!", "Mandou bem!", "Perfeito!", "Acertou em cheio!", "√â exatamente isso!" ];
        const incorrectFeedbacks = [ "Na trave!", "Quase l√°...", "N√£o foi dessa vez.", "Opa!", "Essa pegou, hein?" ];

        // --- ELEMENTOS DO DOM ---
        const allScreens = { start: document.getElementById('start-screen'), quiz: document.getElementById('quiz-screen'), results: document.getElementById('results-screen'), explanation: document.getElementById('explanation-screen') };
        const playerNameInput = document.getElementById('player-name');
        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const progressText = document.getElementById('progress');
        const scoreText = document.getElementById('score');
        const correctAnswersText = document.getElementById('correct-answers');
        const explanationHeader = document.getElementById('explanation-header');
        const explanationText = document.getElementById('explanation-text');
        const finalPlayerName = document.getElementById('final-player-name');
        const finalScoreText = document.getElementById('final-score');
        const finalCorrectAnswersText = document.getElementById('final-correct-answers');
        const awardIcon = document.getElementById('award-icon');
        const awardText = document.getElementById('award-text');
        const shareNotification = document.getElementById('share-notification');
        const voiceBtn = document.getElementById('voice-btn');
        const voiceStatus = document.getElementById('voice-status');
        
        // --- VARI√ÅVEIS DO JOGO ---
        let questions = [];
        let currentQuestionIndex;
        let score;
        let correctAnswersCount;
        let playerName;
        let recognition;

        // --- FUN√á√ïES DE NAVEGA√á√ÉO ---
        function showScreen(screenName) { Object.values(allScreens).forEach(screen => screen.style.display = 'none'); allScreens[screenName].style.display = 'block'; allScreens[screenName].classList.add('fade-in'); }

        // --- FUN√á√ïES DE RECONHECIMENTO DE VOZ ---
        function setupSpeechRecognition() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (SpeechRecognition) {
                recognition = new SpeechRecognition();
                recognition.lang = 'pt-BR';
                recognition.continuous = false;
                recognition.interimResults = false;

                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript.toLowerCase().trim();
                    voiceStatus.textContent = `Voc√™ disse: "${transcript}"`;
                    checkVoiceAnswer(transcript);
                };

                recognition.onerror = (event) => {
                    voiceStatus.textContent = 'Erro no reconhecimento. Tente de novo.';
                    resetVoiceButton();
                };

                recognition.onend = () => {
                    resetVoiceButton();
                };

                voiceBtn.addEventListener('click', () => {
                    if (voiceBtn.classList.contains('listening')) {
                        recognition.stop();
                    } else {
                        recognition.start();
                        voiceStatus.textContent = 'Ouvindo...';
                        voiceBtn.classList.add('listening');
                    }
                });
            } else {
                voiceBtn.style.display = 'none';
                voiceStatus.textContent = 'Reconhecimento de voz n√£o √© suportado neste navegador.';
            }
        }

        function checkVoiceAnswer(transcript) {
            const answerButtons = Array.from(answersContainer.children);
            let foundMatch = false;
            
            for (const button of answerButtons) {
                const buttonText = button.textContent.toLowerCase();
                // Tenta encontrar uma correspond√™ncia exata ou parcial
                if (transcript.includes(buttonText) || buttonText.includes(transcript)) {
                    button.click();
                    foundMatch = true;
                    break;
                }
            }

            if (!foundMatch) {
                voiceStatus.textContent = 'N√£o entendi. Clique ou tente falar de novo.';
            }
        }

        function resetVoiceButton() {
            voiceBtn.classList.remove('listening');
        }

        // --- FUN√á√ïES DO JOGO ---
        function shuffleArray(array) { for (let i = array.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [array[i], array[j]] = [array[j], array[i]]; } }

        function startGame() {
            playerName = playerNameInput.value || "Jogador";
            questions = [...allQuestions];
            shuffleArray(questions);
            currentQuestionIndex = 0;
            score = 0;
            correctAnswersCount = 0;
            scoreText.innerText = `Pontos: 0`;
            correctAnswersText.innerText = `Acertos: 0`;
            showScreen('quiz');
            showQuestion();
        }

        function showQuestion() {
            resetState();
            progressText.innerText = `Pergunta ${currentQuestionIndex + 1} / ${questions.length}`;
            const currentQuestion = questions[currentQuestionIndex];
            questionText.innerText = currentQuestion.question;
            const btnColors = ['btn-color-1', 'btn-color-2', 'btn-color-3', 'btn-color-4'];
            currentQuestion.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.innerText = answer.text;
                button.classList.add('answer-btn', btnColors[index % btnColors.length]);
                if (answer.correct) button.dataset.correct = true;
                button.addEventListener('click', selectAnswer);
                answersContainer.appendChild(button);
            });
        }
        
        function resetState() { 
            while (answersContainer.firstChild) { answersContainer.removeChild(answersContainer.firstChild); }
            voiceStatus.textContent = '';
            resetVoiceButton();
        }

        function selectAnswer(e) {
            const selectedButton = e.target;
            const correct = selectedButton.dataset.correct === 'true';

            if (correct) {
                correctAnswersCount++;
                score += 10;
                scoreText.innerText = `Pontos: ${score}`;
                correctAnswersText.innerText = `Acertos: ${correctAnswersCount}`;
                selectedButton.classList.add('correct');
            } else {
                selectedButton.classList.add('incorrect');
            }
            
            Array.from(answersContainer.children).forEach(button => {
                if (button.dataset.correct === 'true' && !correct) button.classList.add('correct');
                button.disabled = true;
            });
            
            voiceBtn.disabled = true; // Desabilita o bot√£o de voz ap√≥s a resposta
            setTimeout(() => showExplanation(correct), 1500);
        }

        function showExplanation(isCorrect) {
            showScreen('explanation');
            const feedbackArray = isCorrect ? correctFeedbacks : incorrectFeedbacks;
            const randomIndex = Math.floor(Math.random() * feedbackArray.length);
            explanationHeader.innerText = feedbackArray[randomIndex];
            explanationHeader.style.color = isCorrect ? 'var(--success-color)' : 'var(--danger-color)';
            
            explanationText.innerText = questions[currentQuestionIndex].explanation;
        }

        function showNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showScreen('quiz');
                showQuestion();
                voiceBtn.disabled = false; // Reabilita o bot√£o de voz
            } else {
                showResults();
            }
        }
        
        function showResults() {
            showScreen('results');
            finalPlayerName.innerText = playerName;
            const totalQuestions = questions.length;
            const maxScore = totalQuestions * 10;
            const percentage = (correctAnswersCount / totalQuestions) * 100;

            finalScoreText.innerText = `${score} / ${maxScore}`;
            finalCorrectAnswersText.innerText = `Voc√™ acertou ${correctAnswersCount} de ${totalQuestions} perguntas.`;

            if (percentage === 100) {
                awardIcon.innerText = 'ü•á';
                awardText.innerText = 'Trof√©u Heitor de Ouro';
            } else if (percentage >= 80) {
                awardIcon.innerText = 'ü•à';
                awardText.innerText = 'Trof√©u Bibi dos C√£es de Prata';
            } else if (percentage >= 60) {
                awardIcon.innerText = 'ü•â';
                awardText.innerText = 'Trof√©u Labubu de Bronze';
            } else {
                awardIcon.innerText = 'üóëÔ∏è';
                awardText.innerText = 'Parab√©ns, seu lixo';
            }
        }

        function shareResult() {
            const textToCopy = `Consegui ${score} pontos no Quiz de Ci√™ncias! Tente me superar! Para jogar, pe√ßa o arquivo "quiz.html" para o Heitor.`;
            const textArea = document.createElement('textarea');
            textArea.value = textToCopy;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);

            shareNotification.innerText = 'Mensagem copiada!';
            setTimeout(() => {
                shareNotification.innerText = '';
            }, 2000);
        }

        function restartGame() {
            showScreen('start');
            playerNameInput.value = "";
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            showScreen('start');
            setupSpeechRecognition();
        });

    </script>
</body>
</html>
